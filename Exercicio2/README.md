# Explicação

O código estava com inconsistência, existia variáveis redundantes e falhas na indentação, identifiquei também uma função fazendo mais que o necessário para o seu escopo, usei o construtor da classe para inicializar a variável de texto, antes era instanciada em vários pontos. Renomei algumas variáveis para ficar mais claro de entender.